{"version":3,"sources":["uni-app:///main.js","webpack:///D:/DW/HB/Graduation_project/notion-frontEnd/pages/home/home.vue?4d10","webpack:///D:/DW/HB/Graduation_project/notion-frontEnd/pages/home/home.vue?f591","webpack:///D:/DW/HB/Graduation_project/notion-frontEnd/pages/home/home.vue?c977","webpack:///D:/DW/HB/Graduation_project/notion-frontEnd/pages/home/home.vue?196c","uni-app:///pages/home/home.vue","webpack:///D:/DW/HB/Graduation_project/notion-frontEnd/pages/home/home.vue?c973","webpack:///D:/DW/HB/Graduation_project/notion-frontEnd/pages/home/home.vue?0fa9"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,0F,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACwD;AACL;AACqC;;;AAGxF;AAC8K;AAC9K,gBAAgB,6KAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,wCAAwC,KAAI;AAC5C;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5CA;AAAA;AAAA;AAAA;AAAwpB,CAAgB,8mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACkF5qB;;;;;;AAMA,+E;;AAEA;AACA;AACA;AACA,mB;;AAEA;AACA,MADA,kBACA;AACA;AACA,kBADA;AAEA,iBAFA;AAGA,gBAHA,EAGA;AACA,eAJA;AAKA,sBALA;AAMA,wBANA;AAOA,eAPA;AAQA,qBARA;AASA,uBATA;AAUA,wBAVA;AAWA,8BAXA;AAYA,qBAZA;AAaA,oBAbA;AAcA,4DAdA;;AAgBA,GAlBA;AAmBA;AACA,cADA;AAEA,oBAFA,EAnBA;;AAuBA;AACA,iBADA,2BACA;AACA;AACA;AACA,2CAFA;AAGA;AACA,4BAJA,GADA,SACA,GADA;;AAOA;AACA;AACA;AACA;AACA;AACA,iBAFA,EAVA;AAaA,KAdA;AAeA,WAfA,mBAeA,KAfA,EAeA,GAfA,EAeA;AACA;AACA;AACA;AACA;AACA,OAFA,EAEA,GAFA;;AAIA,KAtBA;AAuBA;AACA,gBAxBA,0BAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAJA,EAIA,CAJA;;AAMA,OAVA;AAWA,KAvCA;AAwCA;AACA,UAzCA,kBAyCA,KAzCA,EAyCA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAJA,MAIA;AACA;AACA;AACA;AACA;AACA;AACA,KAtDA;AAuDA;AACA,QAxDA,gBAwDA,KAxDA,EAwDA,UAxDA,EAwDA,GAxDA,EAwDA,QAxDA,EAwDA;AACA,SADA,GACA,QADA,CACA,GADA,CACA,KADA,GACA,QADA,CACA,KADA,CACA,IADA,GACA,QADA,CACA,IADA;AAEA,sCAFA,CAEA,SAFA,yBAEA,SAFA,CAEA,IAFA,yBAEA,IAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAlEA;AAmEA;AACA,UApEA,kBAoEA,KApEA,EAoEA,UApEA,EAoEA,GApEA,EAoEA,QApEA,EAoEA;AACA,SADA,GACA,QADA,CACA,GADA,CACA,KADA,GACA,QADA,CACA,KADA,CACA,IADA,GACA,QADA,CACA,IADA;AAEA,sCAFA,CAEA,SAFA,0BAEA,SAFA,CAEA,IAFA,0BAEA,IAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,KA7EA;AA8EA;AACA,iBA/EA,yBA+EA,GA/EA,EA+EA;AACA;AACA;AACA;AACA,OAFA;AAGA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SARA;AASA;AACA;;AAEA,KApGA;AAqGA;AACA,yBAtGA,iCAsGA,KAtGA,EAsGA,EAtGA,EAsGA,GAtGA,EAsGA,GAtGA,EAsGA,UAtGA,EAsGA,SAtGA,EAsGA,WAtGA,EAsGA;AACA;AACA;;AAEA,OAHA,MAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WALA,MAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAdA;AAeA,KA/HA;AAgIA;AACA,cAjIA,wBAiIA;AACA;AACA;AACA;AACA,OAFA;AAGA;AACA;AACA;AACA,SAFA;AAGA,OAJA;AAKA;AACA;AACA,KA7IA;AA8IA;AACA,gBA/IA,0BA+IA;AACA;;AAEA,KAlJA;AAmJA;AACA,cApJA,sBAoJA,KApJA,EAoJA,KApJA,EAoJA,UApJA,EAoJA,GApJA,EAoJA,QApJA,EAoJA;AACA;AACA;AACA,KAvJA;AAwJA;AACA,iBAzJA,2BAyJA;AACA;AACA;AACA,2CADA;AAEA;AACA;AACA,mBAJA;AAKA;AACA;AACA,mBAPA,IAFA;;AAWA,KApKA;AAqKA;AACA,gBAtKA,0BAsKA;AACA;AACA,gCADA;AAEA,4BAFA;;AAIA,4BALA,GAKA,8BALA;AAMA,gCANA,GAMA,qCANA;AAOA,qBAPA,GAOA;AACA,4CADA;AAEA,oDAFA;AAGA,uFAHA;AAIA,kDAJA;AAKA,mDALA;AAMA,6CANA,EAMA;AACA,+CAPA,EAOA;AACA;AACA,uDADA,CARA,EAPA;;;;;AAqBA,uGArBA,SAqBA,KArBA;AAsBA,8CAtBA;AAuBA,sCAvBA;;AAyBA,mDAzBA;;AA2BA;AACA;AACA,4BA7BA,GA6BA,qDA7BA;AA8BA;AACA,sHADA,GA9BA;;;AAkCA;AACA;AACA,+GADA;AAEA,iDAFA;;AAIA;AACA,2BAxCA,GAwCA,gDAxCA;AAyCA,qFAzCA;AA0CA;AACA;;AAEA;AACA;AACA,2CADA;;AAGA,iCAjDA;;AAmDA;AACA,+BADA;AAEA,+BAFA;AAGA,gCAHA,IAnDA;;;AAyDA,KA/NA;;AAiOA;AACA,eAlOA,yBAkOA;AACA;AACA;AACA,6BADA,EACA;AACA,mCAFA,EAEA;AACA;AACA;AACA,SALA;AAMA;AACA;AACA,SARA;;AAUA,KA9OA;AA+OA;AACA,YAhPA,sBAgPA;AACA;AACA,qCADA;;AAGA,KApPA,EAvBA;;AA6QA,QA7QA,kBA6QA,CA7QA,EA6QA;AACA;AACA;AACA;AACA,GAjRA;AAkRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBADA,0BACA;AACA;AACA;AACA,OAFA,EAEA,CAFA;AAGA;AACA,KANA,EA9RA,E;;;;;;;;;;;;AC/FA;AAAA;AAAA;AAAA;AAAy9B,CAAgB,23BAAG,EAAC,C;;;;;;;;;;;ACA7+B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/home/home.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/home/home.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./home.vue?vue&type=template&id=92bb8f34&scoped=true&\"\nvar renderjs\nimport script from \"./home.vue?vue&type=script&lang=js&\"\nexport * from \"./home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./home.vue?vue&type=style&index=0&id=92bb8f34&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"92bb8f34\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/home/home.vue\"\nexport default component.exports","export * from \"-!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=template&id=92bb8f34&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l1 = _vm.__map(_vm.goods, function(item, index) {\n    var $orig = _vm.__get_orig(item)\n\n    var l0 = _vm.__map(item.good_query, function(itemgood, good_index) {\n      var $orig = _vm.__get_orig(itemgood)\n\n      var g0 = JSON.parse(itemgood.att_hide)\n      var g1 = JSON.parse(itemgood.att_hide)\n      return {\n        $orig: $orig,\n        g0: g0,\n        g1: g1\n      }\n    })\n\n    return {\n      $orig: $orig,\n      l0: l0\n    }\n  })\n\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      $event.stopPropagation()\n      _vm.total_quantity == 0 ? false : true && _vm.placean_order()\n    }\n  }\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l1: l1\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\n\t\t<!-- 顶部 -->\r\n\t\t<view class=\"top-view\">\r\n\t\t\t<view>{{peopleNum}}人就餐</view>\r\n\t\t\t<view class=\"top-view-flex\">\r\n\t\t\t\t<image src=\"/static/tab/fenxiang.svg\" mode=\"widthFix\"  class=\"top-search\"></image>\r\n\t\t\t\t<image src=\"/static/tab/dingdan.svg\" mode=\"widthFix\" @click=\"my_order()\"></image>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"order-view\">\r\n\t\t\t<view class=\"commodity\">\r\n\t\t\t\t<!-- 左 -->\r\n\t\t\t\t<view class=\"order-left\">\r\n\t\t\t\t\t<scroll-view scroll-y=\"true\" class=\"scroll-Hei\" :scroll-with-animation=\"true\" :enhanced=\"true\" :show-scrollbar=\"false\">\r\n\t\t\t\t\t\t<block v-for=\"(item,index) in itemize\" :key=\"index\">\r\n\t\t\t\t\t\t\t<view class=\"itemize-text\" :class=\"{active: index == trigger}\" @click=\"itemIze(index,item.cid)\">\r\n\t\t\t\t\t\t\t\t<text>{{item.value}}</text>\r\n\t\t\t\t\t\t\t\t<text v-if=\"item.sele_quantity > 0\">{{item.sele_quantity}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</block>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 右 -->\r\n\t\t\t\t<view class=\"order-right\">\r\n\t\t\t\t\t<scroll-view scroll-y=\"true\" class=\"scroll-Hei\"  :scroll-with-animation=\"true\" :enhanced=\"true\" :show-scrollbar=\"false\" :scroll-into-view=\"scroll_into\" @scroll=\"scroLl\">\r\n\t\t\t\t\t\t<block v-for=\"(item,index) in goods\" :key=\"index\">\r\n\t\t\t\t\t\t<view :id=\"item.cid\" class=\"rig-height\">\r\n\t\t\t\t\t\t\t<view class=\"classif\">{{item.category}}</view>\r\n\t\t\t\t\t\t\t<view class=\"classif-goods\" v-for=\"(itemgood,good_index) in item.good_query\" :key=\"good_index\" @click=\"popup_item(true,index,good_index,item.cid,itemgood, specs_index)\">\r\n\t\t\t\t\t\t\t\t<view class=\"goods-image\"><image :src=\"itemgood.image[0].url\" mode=\"aspectFill\"></image></view>\r\n\t\t\t\t\t\t\t\t<view class=\"goods-Price\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"goods-name\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"Bold\">{{itemgood.name}}</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"Thinning\">已售 {{itemgood.monthlysale}}</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"unit-price\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"Symbol\">¥</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"Bold\">{{itemgood.specsArray[0].unitprice}}</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"Thinning\">/{{itemgood.specsArray[0].unit}}</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- 无规格 -->\r\n\t\t\t\t\t\t\t\t<view class=\"quantity\" v-if=\"!JSON.parse(itemgood.att_hide)\">\r\n\t\t\t\t\t\t\t\t\t<view><image v-if=\"itemgood.quantity > 0\" src=\"/static/tab/jianhao.png\" mode=\"widthFix\" @click.stop=\"reduce(index,good_index,item.cid,itemgood, specs_index)\"></image></view>\r\n\t\t\t\t\t\t\t\t\t<view><text v-if=\"itemgood.quantity > 0\">{{itemgood.quantity}}</text></view>\r\n\t\t\t\t\t\t\t\t\t<view><image src=\"/static/tab/jia.png\" mode=\"widthFix\" @click.stop=\"plus(index,good_index,item.cid,itemgood, specs_index)\"></image></view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- 有规格 -->\r\n\t\t\t\t\t\t\t\t<view class=\"quantity specs-view\" v-if=\"JSON.parse(itemgood.att_hide)\">\r\n\t\t\t\t\t\t\t\t\t<text>选规格</text>\r\n\t\t\t\t\t\t\t\t\t<text v-if=\"itemgood.quantity > 0\">{{itemgood.quantity}}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t<view style=\"height: 400rpx;\"></view>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 底部 -->\r\n\t\t\t<view class=\"order-bottom\" @click=\"pop_Shopping()\" :style=\"{'padding-bottom': Modelmes ? '68rpx' : ''}\">\r\n\t\t\t\t<view class=\"Shopping\" style=\"width: 115rpx;\">\r\n\t\t\t\t\t<view class=\"Shopping-left\">\r\n\t\t\t\t\t\t<image src=\"/static/tab/gouwuche.png\" mode=\"widthFix\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"Shopping-number\" v-if=\"total_quantity > 0\">{{total_quantity}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"Shopping-title\" v-if=\"total_quantity > 0\">已点{{total_quantity}}份菜品</view>\r\n\t\t\t\t<view class=\"place-order\" @click.stop=\"total_quantity == 0 ? false : true && placean_order()\">\r\n\t\t\t\t\t<button plain=\"true\" open-type=\"getUserInfo\">选好了</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\n\t\t</view>\r\n\t\t<!-- 购物车 -->\r\n\t\t<Cart class=\"coup-anim\" v-if=\"whetherShow\" :shopping_card=\"shopping_array\"></Cart>\r\n\t\t<!-- 商品详情 -->\r\n\t\t<Details v-if=\"detailWhetherShow\" :pro_details=\"pro_details\"></Details>\r\n\t</view>\n</template>\n\n<script>\r\n\timport {orderCode} from '../../config/order.js'\r\n\t//购物车组件\r\n\timport Cart from './components/shopping-cart.vue'\r\n\t//商品详情弹窗组件\r\n\timport Details from './components/goods-details.vue'\r\n\t// 销售额计算类\r\n\timport {analysis} from '../../config/salesVolume.js'\r\n\t\r\n\tconst db = wx.cloud.database()\r\n\tconst good_collect = db.collection('order-data')\r\n\tconst dishes_data = db.collection('shelves-list')\r\n\tconst _ = db.command\r\n\t\n\texport default {\n\t\tdata() {\n\t\t\treturn {\r\n\t\t\t\tpeopleNum: 0,\n\t\t\t\titemize: [],\r\n\t\t\t\ttrigger: 0,//类目选中索引\r\n\t\t\t\tgoods: [],\r\n\t\t\t\tmoduleHright: [],\r\n\t\t\t\twhetherShow: false,\r\n\t\t\t\ttophei: 0,\r\n\t\t\t\tscroll_into: '',\r\n\t\t\t\ttotal_quantity: 0,\r\n\t\t\t\tshopping_array: [],\r\n\t\t\t\tdetailWhetherShow: false,\r\n\t\t\t\tpro_details: {},\r\n\t\t\t\tspecs_index: 0,\r\n\t\t\t\ttmplIds: 'h36MiW4ZBuZ-yy9wLRdqehnsz7h3IZcnx7nah4vzs7Y'\n\t\t\t}\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tCart,\r\n\t\t\tDetails\r\n\t\t},\n\t\tmethods: {\n\t\t\tasync dishesRequest() {\r\n\t\t\t\tconst res = await wx.cloud.callFunction({\r\n\t\t\t\t  // 云函数名称\r\n\t\t\t\t  name: 'Request-message',\r\n\t\t\t\t  // 传给云函数的参数\r\n\t\t\t\t  data: {},\r\n\t\t\t\t})\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t\tthis.itemize = res.result.res_cate\r\n\t\t\t\tthis.goods = res.result.res_dishes\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.goods_height()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\titemIze(index, cid) {\r\n\t\t\t\tthis.trigger = index\r\n\t\t\t\tthis.scroll_into = cid\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.scroll_into = ''\r\n\t\t\t\t}, 400)\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t// 计算右边每个模块的高度\r\n\t\t\tgoods_height() {\r\n\t\t\t\tconst query = wx.createSelectorQuery()\r\n\t\t\t\tquery.selectAll('.rig-height').boundingClientRect()\r\n\t\t\t\t// query.selectViewport().scrollOffset()\r\n\t\t\t\tquery.exec((res) => {\r\n\t\t\t\t  // res[0].top       // #the-id节点的上边界坐标\r\n\t\t\t\t  // res[1].scrollTop // 显示区域的竖直滚动位置\r\n\t\t\t\t // console.log(res)\r\n\t\t\t\t res[0].reduce((prev, next) => {\r\n\t\t\t\t\t // this.moduleHright.push(prev + next.height)\r\n\t\t\t\t\t this.moduleHright.push(Math.floor(prev + next.height))\r\n\t\t\t\t\treturn prev + next.height\r\n\t\t\t\t }, 0)\r\n\t\t\t\t \r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 右边滚动触发\r\n\t\t\tscroLl(event) {\r\n\t\t\t\tlet scrollTop = event.detail.scrollTop\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\tif(scrollTop > this.tophei) {\r\n\t\t\t\t\t\tif(scrollTop >= this.moduleHright[this.trigger]) {\r\n\t\t\t\t\t\t\tthis.trigger += 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\tif(scrollTop < this.moduleHright[this.trigger - 1]) {//与上一个对比\r\n\t\t\t\t\t\t\tthis.trigger -= 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\tthis.tophei = scrollTop\r\n\t\t\t},\r\n\t\t\t// 添加商品\r\n\t\t\tplus(index,good_index,cid,itemgood, specs_index = 0) {\r\n\t\t\t\tconst {_id, image, name} = itemgood\r\n\t\t\t\tconst {unitprice, unit} = itemgood.specsArray[specs_index]\r\n\t\t\t\tconst num = ++this.goods[index].good_query[good_index].quantity\r\n\t\t\t\t++this.itemize[index].sele_quantity\r\n\t\t\t\t++this.total_quantity\r\n\t\t\t\tthis.specs_index = specs_index\r\n\t\t\t\tconst obj = {_id, cid, image, name, unitprice, quantity: num, unit, total_price: unitprice * num, good_index, specs_index}\r\n\t\t\t\tthis.shopping_Cart(obj)\r\n\t\t\t\t// console.log(JSON.parse(itemgood.att_hide))\r\n\t\t\t},\r\n\t\t\t//减少商品\r\n\t\t\treduce(index,good_index,cid,itemgood, specs_index = 0) {\r\n\t\t\t\tconst {_id, image, name} = itemgood\r\n\t\t\t\tconst {unitprice, unit} = itemgood.specsArray[specs_index]\r\n\t\t\t\tconst num = --this.goods[index].good_query[good_index].quantity\r\n\t\t\t\t--this.itemize[index].sele_quantity\r\n\t\t\t\t--this.total_quantity\r\n\t\t\t\tthis.specs_index = specs_index\r\n\t\t\t\tconst obj = {_id, cid, image, name, unitprice, quantity: num, unit, total_price: unitprice * num, good_index, specs_index}\r\n\t\t\t\tthis.shopping_Cart(obj)\r\n\t\t\t},\r\n\t\t\t// 购物车中的商品\r\n\t\t\tshopping_Cart(obj) {\r\n\t\t\t\t// console.log(\"obj: \", obj)\r\n\t\t\t\tconst is_exit = this.shopping_array.find((item) => {\r\n\t\t\t\t\treturn obj._id == item._id && obj.specs_index == item.specs_index\r\n\t\t\t\t})\r\n\t\t\t\tif(is_exit === undefined) {\r\n\t\t\t\t\tthis.shopping_array.push(obj)\r\n\t\t\t\t}else {\r\n\t\t\t\t\t// console.log(\"已存在\")\r\n\t\t\t\t\tthis.shopping_array.forEach((att, index) => {\r\n\t\t\t\t\t\tif(att._id == obj._id) {\r\n\t\t\t\t\t\t\tatt.quantity = obj.quantity\r\n\t\t\t\t\t\t\tatt.total_price = att.quantity * att.unitprice\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(att.quantity == 0) {\r\n\t\t\t\t\t\t\tthis.shopping_array.splice(index, 1)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(\"购物车商品：\", this.shopping_array)\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t// 购物车中的商品加减\r\n\t\t\tshopping_Cart_add_sub(index, QU, _id, cid, good_index, unitprice, specs_index) {\r\n\t\t\t\tif(QU == 0) {\r\n\t\t\t\t\tthis.shopping_array.splice(index, 1)\r\n\t\t\t\t\t\r\n\t\t\t\t}else {\r\n\t\t\t\t\tthis.shopping_array[index].quantity = QU\r\n\t\t\t\t\tthis.shopping_array[index].total_price = QU * unitprice\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t// 右边的商品列表对应商品同步\r\n\t\t\t\tthis.goods.forEach((item, index) => {\r\n\t\t\t\t\tif(item.cid == cid) {\r\n\t\t\t\t\t\tif(item.good_query[good_index].quantity > QU) {\r\n\t\t\t\t\t\t\t// 减\r\n\t\t\t\t\t\t\titem.good_query[good_index].quantity = QU\r\n\t\t\t\t\t\t\t--this.itemize[index].sele_quantity\r\n\t\t\t\t\t\t\t--this.total_quantity\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\t// 加\r\n\t\t\t\t\t\t\titem.good_query[good_index].quantity = QU\r\n\t\t\t\t\t\t\t++this.itemize[index].sele_quantity\r\n\t\t\t\t\t\t\t++this.total_quantity\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t// 清空购物车\r\n\t\tempty_data() {\r\n\t\t\tthis.shopping_array = []\r\n\t\t\tthis.itemize.forEach((item) => {\r\n\t\t\t\titem.sele_quantity = 0\r\n\t\t\t})\r\n\t\t\tthis.goods.forEach((item) => {\r\n\t\t\t\titem.good_query.forEach((att) => {\r\n\t\t\t\t\tatt.quantity = 0\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\tthis.total_quantity = 0\r\n\t\t\tthis.pop_Shopping(false)\r\n\t\t},\r\n\t\t// 弹出购物车组件\r\n\t\tpop_Shopping(value = true) {\r\n\t\t\tthis.whetherShow = value\r\n\t\t\t\r\n\t\t},\r\n\t\t// 弹出商品详情弹窗\r\n\t\tpopup_item(value, index, good_index, cid, itemgood, specs_index = 0) {\r\n\t\t\tthis.detailWhetherShow = value\r\n\t\t\tthis.pro_details = {index, good_index, cid, itemgood, specs_index}\r\n\t\t},\r\n\t\t// 点击提交订单弹出订阅消息弹窗\r\n\t\tasync placean_order(){\r\n\t\t\t//消息弹窗\r\n\t\t\twx.requestSubscribeMessage({\r\n\t\t\t  tmplIds: [this.tmplIds],\r\n\t\t\t  success:(res)=>{\r\n\t\t\t\t  this.sub_database()\r\n\t\t\t  },\r\n\t\t\t  fail:(err)=>{\r\n\t\t\t\t  this.sub_database()\r\n\t\t\t  }\r\n\t\t\t})\n\t\t},\r\n\t\t// 提交订单\r\n\t\tasync sub_database() {\r\n\t\t\twx.showLoading({\r\n\t\t\t  title: '正在下单中',\r\n\t\t\t  mask: true,\r\n\t\t\t})\r\n\t\t\t\tlet table_number = wx.getStorageSync('table_num')\r\n\t\t\t\tlet number_of_diners = wx.getStorageSync('number_of_diners')\r\n\t\t\t\tlet order = {\r\n\t\t\t\t\ttable_number,\r\n\t\t\t\t\tnumber_of_diners,\r\n\t\t\t\t\torder_time: this.$Time().utcOffset(8).format(\"YYYY-MM-DD HH:mm:ss\"),\r\n\t\t\t\t\tsett_amount: this.shoppinPrice,\r\n\t\t\t\t\torder_no: orderCode(),\r\n\t\t\t\t\ttransac_status: 'unsettled', //结账状态\r\n\t\t\t\t\torder_receiving: 'mis_orders', //接单状态\r\n\t\t\t\t\tmenu: [\r\n\t\t\t\t\t\t{goods_list: this.shopping_array}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t\ttry{\r\n\t\t\t\t\t// 1. 提交订单后是否是加菜， 根据transac_status 结账状态以及table_number 桌号做判断; .field({})可以选择返回字段\r\n\t\t\t\t\tconst query = await good_collect.where({table_number, transac_status: 'unsettled'}).get()\r\n\t\t\t\t\tconsole.log(\"QUERY: \", query)\r\n\t\t\t\t\tif(query.data.length == 0) {\r\n\t\t\t\t\t\t// 已经结账，添加新订单\r\n\t\t\t\t\t\tawait good_collect.add({data: order})\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\t// 未结账，此订单提交为加菜订单，使用更新数组操作符\r\n\t\t\t\t\t\tconsole.log(\"未结账\")\r\n\t\t\t\t\t\tlet total_amount = Number(query.data[0].sett_amount) + order.sett_amount\r\n\t\t\t\t\t\tawait good_collect.doc(query.data[0]._id).update({\r\n\t\t\t\t\t\t\t\tdata: {sett_amount: total_amount, order_receiving: 'mis_orders', menu: _.unshift(order.menu[0])}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//批量自增售出商品数量\r\n\t\t\t\t\tthis.shopping_array.forEach(async (item) => {\r\n\t\t\t\t\t\tawait dishes_data.doc(item._id).update({data: {monthlysale: _.inc(item.quantity)}})\r\n\t\t\t\t\t\tconsole.log(\"销售量改变\")\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// 计算当天销售额\r\n\t\t\t\t\tlet current_day = this.$Time().utcOffset(8).format(\"YYYY-MM-DD\")\r\n\t\t\t\t\tawait new analysis().sameDay(current_day, order.sett_amount)\r\n\t\t\t\t\t// 推送提醒\r\n\t\t\t\t\tthis.pushMessage()\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 跳转到订单页\r\n\t\t\t\t\twx.redirectTo({\r\n\t\t\t\t\t\turl:'/pages/order/order'\r\n\t\t\t\t\t})\r\n\t\t\t\t\twx.hideLoading()\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\twx.showToast({\r\n\t\t\t\t\t  title: '发生错误',\r\n\t\t\t\t\t  icon: 'error',\r\n\t\t\t\t\t  duration: 1000\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\r\n\t\t\t// 推送订单提醒\r\n\t\t\tpushMessage() {\r\n\t\t\t\tvar pubsub = this.goeasy.pubsub;\r\n\t\t\t\tpubsub.publish({\r\n\t\t\t\t\tchannel: \"my_channel\",//替换为您自己的channel\r\n\t\t\t\t\tmessage: \"这是小程序home页面发的信息!\",//替换为您想要发送的消息内容\r\n\t\t\t\t\tonSuccess:function(){\r\n\t\t\t\t\t\tconsole.log(\"消息发布成功。\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonFailed: function (error) {\r\n\t\t\t\t\t\tconsole.log(\"消息发送失败，错误编码：\"+error.code+\" 错误信息：\"+error.content);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 跳转到我的订单\r\n\t\t\tmy_order() {\r\n\t\t\t\twx.navigateTo({\r\n\t\t\t\t\turl: \"/pages/myOrder/myOrder\"\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\tthis.dishesRequest()\r\n\t\t\t// 获取用餐人数\r\n\t\t\tthis.peopleNum = wx.getStorageSync('number_of_diners')\r\n\t\t},\r\n\t\t// 小程序端监听数据库变化测试\r\n\t\t// onShow() {\r\n\t\t// \tconst watcher = db.collection('order-data').doc('fe4f571c625685ed00327f1f66fb44f9')\r\n\t\t// \t.watch({\r\n\t\t// \t    onChange: function(snapshot) {\r\n\t\t// \t      console.log('snapshot', snapshot)\r\n\t\t// \t    },\r\n\t\t// \t    onError: function(err) {\r\n\t\t// \t      console.error('the watch closed because of error', err)\r\n\t\t// \t    }\r\n\t\t// \t  })\r\n\t\t// },\r\n\t\tcomputed: {\r\n\t\t\tshoppinPrice() {\r\n\t\t\t\tconst all_price = this.shopping_array.reduce((prev, next) => {\r\n\t\t\t\t\treturn prev + next.total_price\r\n\t\t\t\t}, 0)\r\n\t\t\t\t return all_price\r\n\t\t\t}\r\n\t\t}\r\n\t\t\n\t}\n</script>\n\n<style scoped>\n.top-view{\n\tbackground:linear-gradient(to bottom, #f7d45f,#f7d562,#f8d561,#f9db76, #f9de80);\n\theight: 120rpx;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 0 20rpx;\n\tposition: fixed;\n\ttop: 0;\n\tright: 0;\n\tleft: 0;\n}\n.top-view image{\n\tdisplay: block;\n\twidth: 35rpx;\n\theight: 35rpx;\n}\n.top-view-flex{\n\tdisplay: flex;\n\talign-items: center;\n}\n.top-search{padding-right: 50rpx;}\n/* 点餐界面 */\n.order-view{margin-top: 120rpx;}\n.commodity{\n\tdisplay: flex;\n\tposition: fixed;\n\ttop: 120rpx;\n\tleft: 0;\n\tright: 0;\n\t}\n.order-left{\n\tbackground-color: #fafafa;\n\twidth: 150rpx;\n\toverflow-y: auto;\n}\n.itemize-text{\n\tfont-size: 27rpx;\n\tpadding: 30rpx 10rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tcolor: #797979;\n}\n.itemize-text text:nth-child(1){flex: 1;}\n.itemize-text text:nth-child(2){\n\tbackground-color: #eb5941;\n\tborder-radius: 50%;\n\tfont-size: 20rpx;\n\tcolor: #FFFFFF;\n\twidth: 30rpx;\n\theight: 30rpx;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tmargin-left: 2rpx;\n}\n.scroll-Hei{\n\theight: 100vh;\n\t/* white-space: nowrap; */\n}\n.order-right{\n\tbackground-color: #FFFFFF;\n\tflex: 1;\n\toverflow-y: auto;\n\t\n}\n.classif{\n\tfont-size: 27rpx;\n\tpadding: 30rpx 20rpx;\n\tcolor: #797979;\n}\n/* 分类商品 */\n.classif-goods{\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tpadding: 0 20rpx;\n\theight: 150rpx;\n\tfont-size: 30rpx;\n\tmargin-bottom: 45rpx;\n}\n\n.goods-image image{\n\tdisplay: block;\n\twidth: 150rpx;\n\theight: 150rpx;\n\tborder-radius: 10rpx;\n}\n.goods-Price{\n\tflex: 1;\n\tposition: relative;\n\tpadding: 0 20rpx;\n}\n.goods-Price text{display: block;}\n.goods-name{\n\tdisplay: flex;\n\tflex-direction: column;\n\tposition: relative;\n\ttop: 0;\n}\n.goods-name text:nth-child(1){padding-bottom: 9rpx;}\n.unit-price{\n\tposition: absolute;\n\tbottom: 0;\n\tdisplay: flex;\n\talign-items: baseline;\n}\n.Bold{font-weight: bold;}\n.Symbol{font-size: 20rpx;}\n.Thinning{font-size: 25rpx;\ncolor: #cccccc;\n}\n.quantity image{width: 50rpx; height: 50rpx;}\n.quantity view{\n\twidth: 50rpx;\n\theight: 50rpx;\n\ttext-align: center;\n    line-height: 50rpx;\n}\n.quantity{\n\tdisplay: flex;\n\talign-items: center;\n\talign-self: flex-end;\n\twidth: 200rpx;\n\tjustify-content: space-between;\n}\n/* 规格 */\n.specs-view{\n\theight: 50rpx;\n\twidth: 100rpx !important;\n\tborder-radius: 50rpx;\n\tfont-size: 25rpx;\n\tjustify-content: center !important;\n\tposition: relative;\n\tbackground: linear-gradient(to right,#f8da81,#f8d771,#f7d362,#f6cb4a);\n}\n.specs-view text:nth-child(2){\n\tposition: absolute;\n\tright: -10rpx;\n\ttop: -17rpx;\n\tbackground-color: #eb5941;\n\tborder-radius: 50%;\n\tfont-size: 20rpx;\n\tcolor: #FFFFFF;\n\twidth: 30rpx;\n\theight: 30rpx;\n\ttext-align: center;\n\tline-height: 30rpx;\n}\n.order-bottom{\n\tbackground-color: #fefefe;\n\theight: 120rpx;\n\tposition: fixed;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tbox-shadow: 0rpx -1.9rpx 1rpx 1rpx #f9f9f9;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tpadding: 0 20rpx;\n\tz-index: 9;\n}\n.Shopping image{width: 75rpx; height: 75rpx; display: block;}\n.Shopping-left{width: 75rpx; height: 75rpx;}\n.Shopping{\n\tdisplay: flex;\n\talign-items: center;\n\t/* height: 120rpx; */\n}\n.Shopping-number{\n\talign-self: flex-start;\n\tbackground: #eb5941;\n\tcolor: #ffff;\n\twidth: 40rpx;\n\tborder-radius: 50rpx;\n\ttext-align: center;\n\tfont-size: 20rpx;\n\t/* margin-top: 15rpx; */\n}\n.Shopping-title{\n\tflex: 1;\n\tpadding: 0 25rpx;\n\tcolor: #999999;\n\t/* height: 120rpx;\n\tline-height: 120rpx; */\n}\n.place-order button{\n\tborder: none;\n\tbackground:linear-gradient(to right,#f8da81,#f8d771,#f7d362,#f6cb4a);\n\twidth: 200rpx;\n\theight: 75rpx;\n\tline-height: 75rpx;\n\tborder-radius: 50rpx;\n\tfont-weight: bold;\n\tz-index: 9;\n}\n/* 点击分类列表加上背景色 */\n.active{\n\tbackground-color: #FFFFFF;\n\tcolor: #000000 !important;\n}\n</style>\n","import mod from \"-!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=style&index=0&id=92bb8f34&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=style&index=0&id=92bb8f34&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1650956795379\n      var cssReload = require(\"D:/迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}